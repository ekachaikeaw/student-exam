สั้น ๆ: ส่วนใหญ่ **ไม่ควรใช้ `var`** เพราะทำให้บั๊กเกิดง่ายและโค้ดอ่านยากกว่าการใช้ `let/const`

## เหตุผลหลัก

1. **ขอบเขต (scope) เป็นแบบฟังก์ชัน ไม่ใช่บล็อก**

```js
if (true) {
  var x = 1;   // หลุดออกนอกบล็อกได้
}
console.log(x); // 1  (รั่วออกมา)

if (true) {
  let y = 1;
}
console.log(y); // ReferenceError (ปลอดภัยกว่า)
```

2. **Hoisting + ไม่มี TDZ → ใช้งานก่อนประกาศได้ (ได้ค่า `undefined`)**

```js
console.log(a); // undefined  (สับสนง่าย)
var a = 1;

console.log(b); // ReferenceError (ป้องกันบั๊ก)
let b = 1;
```

> `let/const` มี **Temporal Dead Zone (TDZ)** ช่วยจับความผิดพลาดตั้งแต่ต้น

3. **ประกาศซ้ำได้**

```js
var z = 1;
var z = 2; // ไม่ error → ทับค่ากันเองแบบเงียบ ๆ
let w = 1;
let w = 2; // SyntaxError (กันพลาด)
```

4. **หลุดไปใน global ได้ง่าย (โดยเฉพาะสคริปต์เบราว์เซอร์แบบเดิม)**

```js
var foo = 1;
// บนเบราว์เซอร์แบบ non-module มักไปโผล่ที่ window.foo → เสี่ยงชนชื่อ
```

5. **พังง่ายในลูป + async (closure กับ for-loop)**

```js
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 0);
}
// 3, 3, 3  (ตัวแปรเดียวกันถูกแชร์)

for (let j = 0; j < 3; j++) {
  setTimeout(() => console.log(j), 0);
}
// 0, 1, 2  (ถูกต้องตามคาด)
```

## ควรใช้แบบไหนแทน

* **ใช้ `const` เป็นค่าเริ่มต้นเสมอ** (เมื่อไม่ต้องเปลี่ยนแปลง (reassign))
* เปลี่ยนเป็น **`let`** เฉพาะกรณีที่ต้อง **reassign**
* หลีกเลี่ยง `var` ยกเว้นดูแล **โค้ด legacy** ที่ยังผูกกับพฤติกรรมเก่า ๆ

> แนวคิดนี้ช่วยให้โค้ด **ปลอดภัยขึ้น, คาดเดาได้, และแก้บั๊กง่าย** ✨
